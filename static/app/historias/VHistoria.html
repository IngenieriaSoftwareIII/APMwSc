<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle"
                    data-toggle="collapse"
                    data-target="#contenido-plegable">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <span class="navbar-brand" >Historia de usuario</span>
        </div>
        <div class="collapse navbar-collapse" id="contenido-plegable">
            <ul class="nav navbar-nav navbar-left">
<li><a ng-click="VCrearTarea5(idHistoria)"
       ng-show="actor=='desarrollador' || actor=='duenoProducto' || false">
  +Tarea</a></li>
<li><a ng-click="VCrearPrueba11(idHistoria)"
       ng-show="actor=='desarrollador' || actor=='duenoProducto' || false">
  +Prueba</a></li>
<li><a ng-click="VCrearActor6(idPila)"
       ng-show="actor=='duenoProducto' || false">
  +Actor</a></li>
<li><a ng-click="VCrearAccion7(idPila)"
       ng-show="actor=='duenoProducto' || false">
  +Accion</a></li>
<li><a ng-click="VCrearObjetivo8(idPila)"
       ng-show="actor=='duenoProducto' || false">
  +Objetivo</a></li>
<li><a ng-click="AElimHistoria9(idHistoria)"
       ng-show="actor=='duenoProducto' || false">
  -Historia</a></li>

            </ul>
            <ul class="nav navbar-nav navbar-right">
<li class="navbar-text" ng-show="usuario.nombre" ng-bind="usuario.nombre"></li>
<li><a ng-click="VHistorias3(idPila)"
       ng-show="actor=='desarrollador' || actor=='duenoProducto' || actor=='maestroScrum' || false">
    Regresar</a></li>
<li><a ng-click="VLogin4()">
    Salir</a></li>

            </ul>
        </div>
    </div>
</nav>

    <form name="fHistoriaForm" ng-submit="AModifHistoria0(fHistoriaForm.$valid)" novalidate>
        <table class="table"  >
            <tr>
                <div class="form-group" 
                     ng-class="{ 'has-error' : fHistoriaSubmitted && fHistoriaForm.codigo.$invalid && 
                                        fHistoriaForm.codigo.$pristine && fHistoriaSubmitted}">
                    <td>
                        <label for="fHistoria_codigo">
                            Código de la historia
                        </label>
                    </td>
                    <td>
                        <input id="fHistoria_codigo" type="text" name="codigo" style="width: 500px" 
                               class="form-control" ng-model="fHistoria.codigo" 
                               placeholder="Código de la historia" required/>
                        <p ng-show="fHistoriaSubmitted && fHistoriaForm.codigo.$invalid" class="help-block">
                            Error en campo Código de la historia.
                        </p>
                    </td>
                </div>
            </tr>
            <tr>
                <div class="form-group" 
                     ng-class="{ 'has-error' : fHistoriaSubmitted && fHistoriaForm.super.$invalid && 
                                               fHistoriaForm.super.$pristine && fHistoriaSubmitted}">
                    <td>
                        <label for="fHistoria_super">
                            Historia más general
                        </label>:&nbsp;
                    </td>
                    <td>
                        <select id="fHistoria_super" style="width: 500px" ng-model="fHistoria.super"  
                                ng-options="item.key as item.value for item in fHistoria_opcionesHistorias">
                        </select>
                        <p ng-show="fHistoriaSubmitted && fHistoriaForm.super.$invalid" class="help-block">
                            Error en campo Historia más general.
                        </p>  
                    </td>
                </div>
            </tr>
            <tr>
                <div class="form-group" 
                     ng-class="{ 'has-error' :  
                                  fHistoriaSubmitted && fHistoriaForm.actores.$invalid && 
                                  HistoriaForm.actores.$pristine && fHistoriaSubmitted}">
                <td>
                    <label for="fHistoria_actores">
                        Actores
                    </label>:&nbsp;
                </td>
                <td>
                    <select id="fHistoria_actores" style="width: 500px" ng-model="fHistoria.actores"  
                            multiple ng-options="item.key as item.value for item in fHistoria_opcionesActores">   
                    </select>
                    <p ng-show="fHistoriaSubmitted && fHistoriaForm.actores.$invalid" class="help-block">
                        Error en campo Actores.
                    </p>
                </td>
                </div>
            </tr>
            <tr>
                <div class="form-group" 
                     ng-class="{ 'has-error' :  
                                 fHistoriaSubmitted && fHistoriaForm.tipo.$invalid && 
                                 fHistoriaForm.tipo.$pristine && fHistoriaSubmitted}">
                <td>
                    <label for="fHistoria_tipo">
                        Tipo
                    </label>:&nbsp;
                </td>
                <td>
                    <select id="fHistoria_tipo" style="width: 500px" ng-model="fHistoria.tipo"  
                            ng-options="item.key as item.value for item in fHistoria_opcionesTiposHistoria">
                    </select>
                    <p ng-show="fHistoriaSubmitted && fHistoriaForm.tipo.$invalid" class="help-block">
                        Error en campo Tipo.
                    </p>
                </td>
                </div>
            </tr>
            <tr>
                <div class="form-group" 
                     ng-class="{ 'has-error' :  
                                fHistoriaSubmitted && fHistoriaForm.accion.$invalid && 
                                fHistoriaForm.accion.$pristine && fHistoriaSubmitted}">
                <td>
                    <label for="fHistoria_accion">
                        Acción
                    </label>:&nbsp;
                </td>
                <td>
                    <select id="fHistoria_accion" style="width: 500px" ng-model="fHistoria.accion"  
                            ng-options="item.key as item.value for item in fHistoria_opcionesAcciones">      
                    </select>

                    <p ng-show="fHistoriaSubmitted && fHistoriaForm.accion.$invalid" class="help-block">
                        Error en campo Acción.
                    </p>
                </td>
                </div>
            </tr>
            <tr>
                <div class="form-group" ng-class="{ 'has-error' :  fHistoriaSubmitted && fHistoriaForm.objetivos.$invalid && fHistoriaForm.objetivos.$pristine && fHistoriaSubmitted}">

                <td>
                    <label for="fHistoria_objetivos">
                        Objetivos no transversales
                    </label>:&nbsp;
                </td>
                <td>
                    <select id="fHistoria_objetivos" style="width: 500px" ng-model="fHistoria.objetivos"  
                            multiple ng-options="item.key as item.value for item in fHistoria_opcionesObjetivos">
                    </select>   
                    <p ng-show="fHistoriaSubmitted && fHistoriaForm.objetivos.$invalid" class="help-block">
                        Error en campo Objetivos no  transversales.
                    </p>
                </td>
                </div>
                <input id="fHistoria_idPila" type="hidden" name="idPila" ng-model="fHistoria.idPila" />
                <input id="fHistoria_idHistoria" type="hidden" name="idHistoria" ng-model="fHistoria.idHistoria" />
            </tr>
            <tr>
                <div class="form-group" ng-class="{ 'has-error' :  fHistoriaSubmitted && fHistoriaForm.prioridad.$invalid && fHistoriaForm.prioridad.$pristine && fHistoriaSubmitted}">
                <td>
                    <label for="fHistoria_prioridad">
                        Prioridad
                    </label>:&nbsp;
                </td>
                <td>
                    <select id="fHistoria_prioridad" style="width: 500px" ng-model="fHistoria.prioridad" required ng-options="item.key as item.value for item in fHistoria_opcionesPrioridad">
                    </select>
                    <p ng-show="fHistoriaSubmitted && fHistoriaForm.prioridad.$invalid" class="help-block">
                        Error en campo Prioridad.
                    </p>
                </td>
                </div>
            </tr>
        </table>                        
        <button type="submit" class="btn btn-perso btn-lg btn-block">
            <span class="glyphicon glyphicon-flash"></span>Modificar
        </button>
    </form>
    <hr /><h3>Tareas <span class="badge" ng-bind="numTareas"></span></h3>
        <table ng-table="tableParams2" template-pagination="pager.html" class="table">
            <tr ng-repeat="row in $data">
                <td align="center" data-title="'Descripción'">
                    {{row['descripcion']}}
                </td>
                <td align="center" data-title="'Horas Estimadas'">
                    {{row['estimatedTime']}} h
                </td>
                <td align="center" ><a ng-show="actor=='desarrollador' || actor=='duenoProducto' || actor=='maestroScrum' || false" ng-click="VTarea2(row['idTarea'], idHistoria)">Detalles</a></td>
            </tr>
        </table>
        <!--button name="complete" class="btn btn-perso btn-lg btn-block {{fHistoria.estado}}" ng-click="ACompletarHistoria(fHistoria.idHistoria)" type="button">
            Marcar como completa
        </button>
        <button name="incomplete" class="btn btn-perso btn-lg btn-block no-{{fHistoria.estado}}" ng-click="AIncompletarHistoria(fHistoria.idHistoria)" type="button">
            Marcar como incompleta
        </button-->
    <hr /><h3>Pruebas de aceptación <span class="badge" ng-bind="numPruebas"></span></h3>
        <table ng-table="tableParams3" template-pagination="pager.html" class="table">
            <tr ng-repeat="row in $data">
                <td align="center" data-title="'Descripción'">{{row['descripcion']}}</td>
                <td align="center" ><a ng-show="actor=='desarrollador' || actor=='duenoProducto' || actor=='maestroScrum' || false" ng-click="downloadAcceptanceTest(row['url'])">Descargar script</a></td>
                <td align="center" ><a ng-click="AElimPrueba2(row['idTarea'])">-prueba</a></td>
            </tr>
        </table>
<hr />


<div id="right"></div>
